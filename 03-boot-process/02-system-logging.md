# SYSTEM LOGGING 

## Type of Programs

Number | Keyword | Description | 
--- | --- | --- | 
0 | `kern` | kernel messages | 
2 | `mail` | Mail system | 
3 | `daemon` | systems Daemons | 
4 | `auth` | security/authorization messages | 
5 | `syslog` | messages generated by syslogd | 
6 | `lpr` | line printer subsystem | 
7 | `news` | network news subsystem | 
8 | `uucp`| UCCP sybsystem | 
9 | `clock` | daemon
10 | `authpriv` | security/authorization messages | 
11 | `ftp` | FTP daemon | 
12 | - | NTP subsystem | 
13 | - | log audit | 
14 | - | log alert |  
15 | `cron` | clock daemon | 
16 | `local0` | local use 0 (local0) |
16 | `local1` | local use 2 (local1) |
16 | `local2` | local use 3 (local2) |
16 | `local3` | local use 4 (local3) |
... | ... | ... |
23 | `local7` | local use 7 (local7) |


## Facilities and Severities 

CODE | SEVERITY | KEYWORD | DESCRIPTION | 
--- | --- | --- | --- | 
0 | Emergency | `emerg` (`panic`) | System is unusable |  
1 | Alert | `alert` | Action must be taken inmediately | 
2 | Critical | `crit` | Critical conditions | 
3 | Error | `err` (`error`) | Error conditions | 
4 | Warning | `warning` (`warn`) | Warning conditions |
5 | Notice | `notice` | Normal but significant condition. | 
6 | Info | `info` | Informational messages. |
7 | Debug | `debug` | Debug-level messages. |

## SYSLOG SERVER

* Old: `syslogd`
* New: `rsyslog` or `syslog-ng`

```
$ cat /etc/rsyslog.conf
```

## LOGGING RULES

1. Selector field
```
FACILITY.SEVERITY  

mail.*  
mail 

FACILITY.none 

# Sentence
FACTILITY_1.SEVERITY;FACILITY_2.SEVERITY
```

2. Action field

* Determines how a message is processed. 

Examples: 
```
mail.*  /var/log/mail.log
```

## CACHING VS NON-CACHING

* Caching is used if the path starts with a hyphen.
`mail.info      - /var/log/mail.info`.
* You may lose some messages during a system crash if you are using caching mode. 
* Using caching mode can improve I/O performance.

Examples: 
```
mail.info       - /var/log/mail.info
mail.warn       - /var/log/mail.warn
mail.err        /var/log/mail.err

auth, authpriv.*        /var/log/auth.log
*.*;auth.none;authpriv.none - /var/log/syslog
```

Example from RED HAT Enterprise Linux:
```
*.info;mail.none;authpriv.none;cron.none    /var/log/messages
```

## LOGGER   

The `logger` command used to generate syslog messages. 

```
$ logger [options] message
```

OPtions: 
* `-p` FACILITY.SEVERITY
* `-t` TAG

Examples: 
```
$ logger -p mail.info -t mailtest "Test."

$ sudo tail -1 /var/log/mail.log
```

## LOGROTATE

The command `logrotate` used to rotate, compress, remove, and mail log files. 

```
/etc/logrotate.conf

include /etc/logrotate.d 
```

Exampels
```
weekly
rotate 4
create
compressed
include /etc/logrotate.d
```

```
$ logrotate -fv /etc/logrotate.conf
```
WHere `-f` is force and `-v` is verboase. 